"use strict";(self.webpackChunkcosmic_games_frontend=self.webpackChunkcosmic_games_frontend||[]).push([[745],{4745:(k,m,l)=>{l.r(m),l.d(m,{HomeComponent:()=>E});var u=l(5661),e=l(690),p=l(4163),F=l(1423);function v(n,d){1&n&&(e.j41(0,"span",29),e.EFF(1,"\u2022 5min timeout (AI only)"),e.k0s())}function h(n,d){1&n&&(e.j41(0,"span",30),e.EFF(1,"\u2022 4h timeout (multiplayer)"),e.k0s())}function f(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",17)(1,"div",18)(2,"div",19)(3,"h3",20),e.EFF(4,"\u{1f3ae} Active Game Session Found"),e.k0s(),e.j41(5,"p",11),e.EFF(6," Room: "),e.j41(7,"span",21),e.EFF(8),e.k0s(),e.EFF(9," \u2022 Player: "),e.j41(10,"span",22),e.EFF(11),e.k0s()(),e.j41(12,"p",23),e.EFF(13),e.DNE(14,v,2,0,"span",24)(15,h,2,0,"span",25),e.k0s()(),e.j41(16,"div",26)(17,"button",27),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.rejoinSession())}),e.EFF(18," \u{1f6aa} Rejoin Game "),e.k0s(),e.j41(19,"button",28),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.clearSession())}),e.EFF(20," \u274c Clear "),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(8),e.JRh(t.activeSession.roomCode),e.R7$(3),e.JRh(t.activeSession.playerName),e.R7$(2),e.SpI(" Session from ",t.formatSessionTime(t.activeSession.timestamp)," "),e.R7$(),e.Y8G("ngIf",t.activeSession.isAIOnly),e.R7$(),e.Y8G("ngIf",!t.activeSession.isAIOnly)}}let E=(()=>{class n{constructor(t,o){this.router=t,this.gameApiService=o,this.activeSession=null}ngOnInit(){this.checkForActiveSession()}checkForActiveSession(){try{const t=localStorage.getItem("activeRoomCode"),o=localStorage.getItem("currentPlayerName"),s=localStorage.getItem("sessionTimestamp");if(t&&o&&s){const i=parseInt(s),r=Date.now()-i;this.validateSessionWithRoomCheck(t,o,i,r)}}catch(t){console.error("Error checking for active session:",t)}}validateSessionWithRoomCheck(t,o,s,i){this.gameApiService.getRoom(t).subscribe({next:a=>{if(a?.success&&a.data){const c=a.data.players.filter(x=>!x.isAI).length<=1;i<(c?3e5:144e5)?this.activeSession={roomCode:t,playerName:o,timestamp:s,isAIOnly:c}:(console.log("Session expired: "+(c?"5min timeout (AI only)":"4h timeout (human players)")),this.clearSessionData())}else console.log("Room no longer exists, clearing session"),this.clearSessionData()},error:a=>{console.warn("Could not validate room composition, using fallback timeout:",a);const r="true"===localStorage.getItem("sessionIsAIOnly");i<(r?3e5:144e5)?this.activeSession={roomCode:t,playerName:o,timestamp:s,isAIOnly:r}:this.clearSessionData()}})}rejoinSession(){this.activeSession&&this.router.navigate(["/room",this.activeSession.roomCode])}clearSession(){this.clearSessionData(),this.activeSession=null}clearSessionData(){localStorage.removeItem("activeRoomCode"),localStorage.removeItem("sessionTimestamp"),localStorage.removeItem("sessionIsAIOnly")}formatSessionTime(t){const s=Date.now()-t,i=Math.floor(s/6e4),a=Math.floor(i/60);return a>0?`${a}h ${i%60}m ago`:`${i}m ago`}createRoom(){this.router.navigate(["/create-room"])}joinRoom(){this.router.navigate(["/join-room"])}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(p.Ix),e.rXU(F.k))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:62,vars:1,consts:[[1,"max-w-4xl","mx-auto","text-center"],["class","casino-panel mb-8 bg-green-900/30 border-green-500",4,"ngIf"],[1,"casino-panel","mb-12"],[1,"text-5xl","font-bold","text-gold","mb-4","text-glow"],[1,"text-xl","text-casino-silver","mb-8"],[1,"grid","md:grid-cols-2","gap-6","max-w-2xl","mx-auto"],[1,"casino-button","text-lg","py-4",3,"click"],[1,"grid","md:grid-cols-3","gap-8","mb-12"],[1,"casino-panel","text-center"],[1,"text-4xl","mb-4"],[1,"text-xl","font-bold","text-gold","mb-2"],[1,"text-casino-silver"],[1,"casino-panel"],[1,"text-3xl","font-bold","text-gold","mb-6"],[1,"grid","md:grid-cols-2","gap-8","text-left"],[1,"text-xl","font-bold","text-casino-silver","mb-3"],[1,"space-y-2","text-casino-silver/80"],[1,"casino-panel","mb-8","bg-green-900/30","border-green-500"],[1,"flex","items-center","justify-between"],[1,"text-left"],[1,"text-xl","font-bold","text-green-400","mb-2"],[1,"text-gold","font-mono"],[1,"text-gold"],[1,"text-sm","text-gray-400","mt-1"],["class","text-yellow-400 ml-2",4,"ngIf"],["class","text-blue-400 ml-2",4,"ngIf"],[1,"flex","gap-2"],[1,"casino-button","bg-green-600","hover:bg-green-700",3,"click"],[1,"casino-button","bg-red-600","hover:bg-red-700",3,"click"],[1,"text-yellow-400","ml-2"],[1,"text-blue-400","ml-2"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.DNE(1,f,21,5,"div",1),e.j41(2,"div",2)(3,"h1",3),e.EFF(4," Welcome to Cosmic Games "),e.k0s(),e.j41(5,"p",4),e.EFF(6," Premium multiplayer card games with friends and AI opponents "),e.k0s(),e.j41(7,"div",5)(8,"button",6),e.bIt("click",function(){return s.createRoom()}),e.EFF(9," \u{1f3ae} Create New Room "),e.k0s(),e.j41(10,"button",6),e.bIt("click",function(){return s.joinRoom()}),e.EFF(11," \u{1f6aa} Join Existing Room "),e.k0s()()(),e.j41(12,"div",7)(13,"div",8)(14,"div",9),e.EFF(15,"\u{1f0cf}"),e.k0s(),e.j41(16,"h3",10),e.EFF(17,"Gin Rummy"),e.k0s(),e.j41(18,"p",11),e.EFF(19," Classic card game with modern multiplayer features "),e.k0s()(),e.j41(20,"div",8)(21,"div",9),e.EFF(22,"\u{1f916}"),e.k0s(),e.j41(23,"h3",10),e.EFF(24,"AI Opponents"),e.k0s(),e.j41(25,"p",11),e.EFF(26," Challenge smart AI players with different difficulty levels "),e.k0s()(),e.j41(27,"div",8)(28,"div",9),e.EFF(29,"\u{1f465}"),e.k0s(),e.j41(30,"h3",10),e.EFF(31,"Multiplayer"),e.k0s(),e.j41(32,"p",11),e.EFF(33," Play with 2-6 players in private rooms "),e.k0s()()(),e.j41(34,"div",12)(35,"h2",13),e.EFF(36,"How to Play"),e.k0s(),e.j41(37,"div",14)(38,"div")(39,"h3",15),e.EFF(40,"Create a Room"),e.k0s(),e.j41(41,"ul",16)(42,"li"),e.EFF(43,'\u2022 Click "Create New Room"'),e.k0s(),e.j41(44,"li"),e.EFF(45,"\u2022 Set your room name and preferences"),e.k0s(),e.j41(46,"li"),e.EFF(47,"\u2022 Share the 6-digit room code with friends"),e.k0s(),e.j41(48,"li"),e.EFF(49,"\u2022 Add AI players if needed"),e.k0s()()(),e.j41(50,"div")(51,"h3",15),e.EFF(52,"Join a Game"),e.k0s(),e.j41(53,"ul",16)(54,"li"),e.EFF(55,'\u2022 Click "Join Existing Room"'),e.k0s(),e.j41(56,"li"),e.EFF(57,"\u2022 Enter the 6-digit room code"),e.k0s(),e.j41(58,"li"),e.EFF(59,"\u2022 Wait for other players to join"),e.k0s(),e.j41(60,"li"),e.EFF(61,"\u2022 Start playing when everyone is ready"),e.k0s()()()()()()),2&o&&(e.R7$(),e.Y8G("ngIf",s.activeSession))},dependencies:[u.MD,u.bT],encapsulation:2})}}return n})()}}]);