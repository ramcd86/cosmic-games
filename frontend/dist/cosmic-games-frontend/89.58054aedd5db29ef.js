"use strict";(self.webpackChunkcosmic_games_frontend=self.webpackChunkcosmic_games_frontend||[]).push([[89],{1089:(C,d,s)=>{s.r(d),s.d(d,{JoinRoomComponent:()=>h});var u=s(467),c=s(5661),i=s(7820),o=s(690),p=s(4163);function _(n,m){1&n&&(o.j41(0,"div",17)(1,"div",18),o.EFF(2,"Joining room..."),o.k0s()())}function g(n,m){if(1&n&&(o.j41(0,"div",17)(1,"div",19),o.EFF(2),o.k0s()()),2&n){const e=o.XpG();o.R7$(2),o.JRh(e.error)}}function R(n,m){if(1&n){const e=o.RV6();o.j41(0,"button",20),o.bIt("click",function(){const t=o.eBV(e).$implicit,l=o.XpG();return o.Njj(l.quickJoin(t))}),o.j41(1,"span",21),o.EFF(2),o.k0s(),o.j41(3,"span",22),o.EFF(4,"Recent room"),o.k0s()()}if(2&n){const e=m.$implicit;o.R7$(2),o.JRh(e)}}function f(n,m){1&n&&(o.j41(0,"div",23),o.EFF(1," No recent rooms "),o.k0s())}let h=(()=>{class n{constructor(e){this.router=e,this.roomCode="",this.playerName="",this.loading=!1,this.error="",this.recentRoomCodes=[],this.loadRecentRooms()}isFormValid(){return 6===this.roomCode.length&&/^\d{6}$/.test(this.roomCode)&&""!==this.playerName.trim()}onRoomCodeInput(e){this.roomCode=e.target.value.replace(/[^0-9]/g,"").substring(0,6)}onJoinRoom(){var e=this;return(0,u.A)(function*(){if(e.isFormValid()){e.loading=!0,e.error="";try{localStorage.setItem("currentPlayerName",e.playerName),localStorage.setItem("activeRoomCode",e.roomCode),localStorage.setItem("sessionTimestamp",Date.now().toString()),console.log("Joining room:",{roomCode:e.roomCode,playerName:e.playerName}),e.saveRecentRoom(e.roomCode),e.router.navigate(["/room",e.roomCode])}catch{e.error="Failed to join room. Please check the room code and try again."}finally{e.loading=!1}}})()}quickJoin(e){this.roomCode=e}goBack(){this.router.navigate(["/"])}loadRecentRooms(){try{const e=localStorage.getItem("cosmic-games-recent-rooms");e&&(this.recentRoomCodes=JSON.parse(e))}catch(e){console.error("Failed to load recent rooms:",e)}}saveRecentRoom(e){try{this.recentRoomCodes=[e,...this.recentRoomCodes.filter(r=>r!==e)].slice(0,5),localStorage.setItem("cosmic-games-recent-rooms",JSON.stringify(this.recentRoomCodes))}catch(r){console.error("Failed to save recent room:",r)}}static{this.\u0275fac=function(r){return new(r||n)(o.rXU(p.Ix))}}static{this.\u0275cmp=o.VBU({type:n,selectors:[["app-join-room"]],standalone:!0,features:[o.aNF],decls:28,vars:7,consts:[[1,"max-w-md","mx-auto"],[1,"casino-panel"],[1,"text-3xl","font-bold","text-gold","mb-8","text-center"],[1,"space-y-6",3,"ngSubmit"],[1,"block","text-casino-silver","font-medium","mb-2"],["type","text","name","roomCode","placeholder","000000","maxlength","6","pattern","[0-9]{6}","required","",1,"casino-input","w-full","text-center","text-2xl","tracking-widest",3,"ngModelChange","input","ngModel"],[1,"text-casino-silver/60","text-sm","mt-1"],["type","text","name","playerName","placeholder","Enter your name...","required","",1,"casino-input","w-full",3,"ngModelChange","ngModel"],[1,"flex","gap-4","pt-4"],["type","button",1,"flex-1","bg-casino-charcoal","border","border-casino-silver/30","text-casino-silver","py-3","px-6","rounded-lg","hover:bg-casino-silver/10","transition-colors",3,"click"],["type","submit",1,"flex-1","casino-button",3,"disabled"],["class","text-center mt-6",4,"ngIf"],[1,"mt-8","pt-6","border-t","border-casino-silver/20"],[1,"text-lg","font-bold","text-casino-silver","mb-4"],[1,"space-y-2"],["class","w-full text-left px-4 py-2 bg-casino-charcoal/50 rounded-lg hover:bg-casino-charcoal transition-colors",3,"click",4,"ngFor","ngForOf"],["class","text-casino-silver/50 text-center py-4",4,"ngIf"],[1,"text-center","mt-6"],[1,"text-casino-gold"],[1,"text-red-500"],[1,"w-full","text-left","px-4","py-2","bg-casino-charcoal/50","rounded-lg","hover:bg-casino-charcoal","transition-colors",3,"click"],[1,"text-casino-gold","font-mono"],[1,"text-casino-silver/60","ml-2"],[1,"text-casino-silver/50","text-center","py-4"]],template:function(r,t){1&r&&(o.j41(0,"div",0)(1,"div",1)(2,"h1",2),o.EFF(3," Join Room "),o.k0s(),o.j41(4,"form",3),o.bIt("ngSubmit",function(){return t.onJoinRoom()}),o.j41(5,"div")(6,"label",4),o.EFF(7," Room Code "),o.k0s(),o.j41(8,"input",5),o.mxI("ngModelChange",function(a){return o.DH7(t.roomCode,a)||(t.roomCode=a),a}),o.bIt("input",function(a){return t.onRoomCodeInput(a)}),o.k0s(),o.j41(9,"p",6),o.EFF(10," Enter the 6-digit room code "),o.k0s()(),o.j41(11,"div")(12,"label",4),o.EFF(13," Your Name "),o.k0s(),o.j41(14,"input",7),o.mxI("ngModelChange",function(a){return o.DH7(t.playerName,a)||(t.playerName=a),a}),o.k0s()(),o.j41(15,"div",8)(16,"button",9),o.bIt("click",function(){return t.goBack()}),o.EFF(17," Cancel "),o.k0s(),o.j41(18,"button",10),o.EFF(19," Join Room "),o.k0s()()(),o.DNE(20,_,3,0,"div",11)(21,g,3,1,"div",11),o.j41(22,"div",12)(23,"h3",13),o.EFF(24," Quick Join "),o.k0s(),o.j41(25,"div",14),o.DNE(26,R,5,1,"button",15)(27,f,2,0,"div",16),o.k0s()()()()),2&r&&(o.R7$(8),o.R50("ngModel",t.roomCode),o.R7$(6),o.R50("ngModel",t.playerName),o.R7$(4),o.Y8G("disabled",!t.isFormValid()),o.R7$(2),o.Y8G("ngIf",t.loading),o.R7$(),o.Y8G("ngIf",t.error),o.R7$(5),o.Y8G("ngForOf",t.recentRoomCodes),o.R7$(),o.Y8G("ngIf",0===t.recentRoomCodes.length))},dependencies:[c.MD,c.Sq,c.bT,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.tU,i.R_,i.vS,i.cV],encapsulation:2})}}return n})()}}]);